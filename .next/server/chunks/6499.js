exports.id=6499,exports.ids=[6499],exports.modules={30115:e=>{e.exports={wrapper:"Form_wrapper__TuueU",popover:"Form_popover__ug9fo",button:"Form_button__tP_Os",contenedorForm:"Form_contenedorForm__LJpn_",inputContainerName:"Form_inputContainerName__7wdqD",inputNameApellido:"Form_inputNameApellido__JcPF3",inputContainer:"Form_inputContainer__YIUup",success:"Form_success__RTN2p",error:"Form_error__Tqxmi",recaptchaContainer:"Form_recaptchaContainer__i46gR",formStyle:"Form_formStyle__eQ1So",submitBtn:"Form_submitBtn__oukBR",input:"Form_input__Pal9b",phoneRow:"Form_phoneRow__yKZy5",subHeader:"Form_subHeader__bKxEe",muted:"Form_muted__dkTEa",letrasDoradasContainer:"Form_letrasDoradasContainer__p9Ibt",letrasDoradasResponsive:"Form_letrasDoradasResponsive__4rzXV",letrasDoradasDesktop:"Form_letrasDoradasDesktop__CnS8S"}},66499:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{Form:()=>d,default:()=>h});var s=r(8732),o=r(82015),n=r(30115),l=r.n(n),i=r(76424),m=r(1428),c=e([m]);m=(c.then?(await c)():c)[0];let u=(0,o.lazy)(()=>Promise.resolve().then(r.t.bind(r,89341,23))),p=(0,o.lazy)(()=>r.e(2122).then(r.bind(r,22122)));function d(){let[e,a]=(0,o.useState)(""),[r,t]=(0,o.useState)(""),[n,c]=(0,o.useState)(""),[d,h]=(0,o.useState)("+52"),[x,_]=(0,o.useState)(""),[g,N]=(0,o.useState)(""),[v,j]=(0,o.useState)(null),[C,F]=(0,o.useState)(null),[f,y]=(0,o.useState)(!1),[b,S]=(0,o.useState)(!1),[$,E]=(0,o.useState)(null),[D,w]=(0,o.useState)(null),A=(0,o.useRef)(null),T=new Date(2035,5,30),R=d.replace("+","").length,q=`${d}${x}`,P=R+x.length,k=e=>e.normalize("NFC").replace(/[^\p{L}\s]/gu,"").replace(/\s{2,}/g," ").trimStart(),L=e=>e.toLowerCase().slice(0,50),B=(e,a=d)=>{let r=e.replace(/[^\d]/g,""),t=a.replace("+","").length,s=Math.max(0,13-t);return r.slice(0,s)},H=e.trim().length>0,V=r.trim().length>0,M=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(n),U=P>=10&&P<=13,z=H&&V&&M&&U&&v,I=(0,i.useRouter)(),O=async s=>{s.preventDefault(),S(!0),E(null),w(null);let o={firstName:e.trim(),lastName:r.trim(),email:n.trim(),countryCode:d,phoneLocal:x,phoneDigits:`${R}${x.length}`,phoneFull:q,phoneRaw:q,comments:(g||"").trim()||"-",date:C?C.toLocaleDateString("es-MX",{day:"numeric",month:"long",year:"numeric"}):"-",recaptchaToken:v};try{if(!v)throw Error("Valida el reCAPTCHA antes de enviar.");if(!z)throw Error("Verifica que todos los campos requeridos est\xe9n completos y correctos.");let e=`Contacto - Japon Premium: ${o.firstName} ${o.lastName}`,r=`
Nuevo contacto desde formulario:
Nombre: ${o.firstName} ${o.lastName}
Email: ${o.email}
Tel\xe9fono: ${o.phoneFull}
Fecha deseada: ${o.date}
Comentarios: ${o.comments}
reCAPTCHA token: ${o.recaptchaToken?"(present)":"(missing)"}
      `.trim(),s=`
        <h2>Nuevo contacto desde formulario</h2>
        <p><strong>Nombre:</strong> ${o.firstName} ${o.lastName}</p>
        <p><strong>Email:</strong> ${o.email}</p>
        <p><strong>Tel\xe9fono:</strong> ${o.phoneFull}</p>
        <p><strong>Fecha deseada:</strong> ${o.date}</p>
        <p><strong>Comentarios:</strong> ${o.comments}</p>
      `,n=await m.default.post(`${(void 0).VITE_API_BASE}/send-email`,{to:"contacto@japonpremium.com.mx",cc:"grupo-santa-f@add.nocrm.io, crm@viajespremium.com.mx",subject:e,text:r,html:s});if(200===n.status)E("\xa1Enviado con \xe9xito! Te contactaremos pronto."),a(""),t(""),c(""),_(""),N(""),F(null),j(null),setTimeout(()=>I.push("/gracias"),500);else throw Error(n.data?.message||"Error en la respuesta del servidor")}catch(e){console.error(e),w(e?.response?.data?.message||e?.message||"Error al enviar el formulario.")}finally{S(!1)}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:l().contenedorForm,children:(0,s.jsx)("form",{onSubmit:O,noValidate:!0,children:(0,s.jsxs)("div",{className:l().formStyle,children:[(0,s.jsx)("h5",{className:l().subHeader,children:"Datos personales"}),(0,s.jsxs)("div",{className:l().inputContainerName,children:[(0,s.jsx)("input",{id:"firstName",type:"text",className:l().inputNameApellido,placeholder:"Tu nombre",value:e,onChange:e=>a(k(e.target.value)),required:!0}),!H&&""!==e&&(0,s.jsx)("small",{className:l().error,children:"S\xf3lo letras y espacios."}),e.length>=35&&(0,s.jsxs)("small",{className:l().warning,children:["L\xedmite: ",e.length,"/40 caracteres"]}),(0,s.jsx)("input",{id:"lastName",type:"text",className:l().inputNameApellido,placeholder:"Tu apellido",value:r,onChange:e=>t(k(e.target.value)),required:!0}),!V&&""!==r&&(0,s.jsx)("small",{className:l().error,children:"S\xf3lo letras y espacios."}),r.length>=35&&(0,s.jsxs)("small",{className:l().warning,children:["L\xedmite: ",r.length,"/40 caracteres"]})]}),(0,s.jsxs)("div",{className:l().inputContainer,children:[(0,s.jsxs)("div",{className:l().phoneRow,children:[(0,s.jsx)("select",{"aria-label":"C\xf3digo de pa\xeds",className:l().input,value:d,onChange:e=>{let a=e.target.value;h(a),_(e=>B(e,a))},required:!0,children:[{name:"M\xe9xico",code:"+52"},{name:"Estados Unidos",code:"+1"},{name:"Canad\xe1",code:"+1"},{name:"Espa\xf1a",code:"+34"},{name:"Argentina",code:"+54"},{name:"Colombia",code:"+57"},{name:"Chile",code:"+56"},{name:"Per\xfa",code:"+51"},{name:"Guatemala",code:"+502"},{name:"Costa Rica",code:"+506"}].map(e=>(0,s.jsxs)("option",{value:e.code,children:[e.name," (",e.code,")"]},e.code+e.name))}),(0,s.jsx)("input",{id:"phone",type:"text",className:l().input,placeholder:"Tu n\xfamero",value:x,onChange:e=>_(B(e.target.value)),inputMode:"tel",required:!0})]}),(0,s.jsxs)("small",{className:l().muted,children:["N\xfamero completo: ",(0,s.jsx)("strong",{children:q})," — ",P," d\xedgitos (m\xedn. 10, m\xe1x. 13)"]}),""!==x&&!U&&(0,s.jsx)("small",{className:l().error,children:"Verifica el n\xfamero: el total (c\xf3digo + n\xfamero) debe tener entre 10 y 13 d\xedgitos."})]}),(0,s.jsxs)("div",{className:l().inputContainer,children:[(0,s.jsx)("input",{id:"email",type:"email",className:l().input,placeholder:"correo@ejemplo.com",value:n,onChange:e=>c(L(e.target.value)),inputMode:"email",required:!0}),(0,s.jsxs)("small",{className:l().muted,children:[n.length,"/50"]}),""!==n&&!M&&(0,s.jsx)("small",{className:l().error,children:"Debe tener formato v\xe1lido y terminar en .com, .com.mx o .es"})]}),(0,s.jsx)("h5",{className:l().subHeader,children:"Sobre tu viaje"}),(0,s.jsxs)("div",{className:l().inputContainer,children:[(0,s.jsx)("label",{htmlFor:"date-display",children:"Fecha aproximada de viaje"}),(0,s.jsxs)("div",{ref:A,style:{position:"relative",display:"flex",flexDirection:"column"},children:[(0,s.jsx)("input",{id:"date-display",type:"text",readOnly:!0,className:l().input,value:C?C.toLocaleDateString():"",placeholder:"Selecciona una fecha",onClick:()=>y(e=>!e)}),f&&(0,s.jsx)("div",{className:l().popover,children:(0,s.jsx)(p,{value:C,onChange:e=>{F(e),y(!1)},maxDate:T})})]})]}),(0,s.jsxs)("div",{className:l().inputContainer,children:[(0,s.jsx)("label",{htmlFor:"comments",children:"Comentarios adicionales (opcional)"}),(0,s.jsx)("textarea",{id:"comments",className:l().input,placeholder:"Escribe cualquier comentario...",value:g,onChange:e=>N(e.target.value),rows:4})]}),(0,s.jsx)("div",{className:`${l().inputContainer} ${l().recaptchaContainer}`,children:(0,s.jsx)(u,{sitekey:"6LcOB9krAAAAAFBEuSUBB2UP1WLngHOnRqy5qKPA",onChange:e=>j(e),onExpired:()=>j(null),onError:()=>j(null)})}),(0,s.jsx)("div",{className:l().inputContainer,children:(0,s.jsx)("button",{className:l().button,type:"submit",disabled:b||!z,children:b?"Enviando…":"Enviar"})}),$&&(0,s.jsx)("p",{className:l().success,children:$}),D&&(0,s.jsx)("p",{className:l().error,children:D})]})})})})}let h=d;t()}catch(e){t(e)}})}};